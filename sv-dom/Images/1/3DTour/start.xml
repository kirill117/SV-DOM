<?xml version="1.0" encoding="UTF-8"?>
<!-- for xml compliance -->
<!-- Generated By Kolor Panotour 1.8.0 -->
<krpano version="1.0.8.14" logkey="false">
    <action name="mainloadpano">
		closepanoobjects();
		ifnot(stopSequence === undefined,interruptAnimation(););
		loadpano(%1,NULL,NULL,BLEND(1));
	</action>
    <!--************** KrPano plugins and datas ***************************************************-->
    <plugin name="data" firstPanoHasBeenPlayed="false" keep="true"/>
    <!--************** Open the first pano ********************************************************-->
    <include url="start0.xml"/>
    <autorotate enabled="false"/>
    <!--************** Fonts **********************************************************************-->
    <textstyle name="DEFAULT" background="false" bold="true" border="false" effect="dropshadow(0,45,0xffffff,4,2);" font="Bodoni MT Black" fontsize="22" italic="false" textcolor="0xff3c22e6"/>
    <!--************** Introduction ***************************************************************-->
    <action name="firstloadcompleteaction">
		if(plugin[data].firstPanoHasBeenPlayed==false,
			set(plugin[data].firstPanoHasBeenPlayed,true);
			set(autorotate.enabled,true);
		);
	</action>
    <!--************** Lensflares *****************************************************************-->
    <lensflareset name="DEFAULT" url="startdata/graphics/flares.jpg"/>
    <!--************** Menu ***********************************************************************-->
    <plugin name="in" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(fov_moveforce,-1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(fov_moveforce,0);" url="startdata/graphics/menu/menu0.png" width="40" x="-180" y="5"/>
    <plugin name="out" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(fov_moveforce,+1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(fov_moveforce,0);" url="startdata/graphics/menu/menu1.png" width="40" x="-140" y="5"/>
    <plugin name="left" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(hlookat_moveforce,-1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(hlookat_moveforce,0);" url="startdata/graphics/menu/menu2.png" width="40" x="-100" y="5"/>
    <plugin name="right" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(hlookat_moveforce,+1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(hlookat_moveforce,0);" url="startdata/graphics/menu/menu3.png" width="40" x="-60" y="5"/>
    <plugin name="up" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(vlookat_moveforce,-1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(vlookat_moveforce,0);" url="startdata/graphics/menu/menu4.png" width="40" x="-20" y="5"/>
    <plugin name="down" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(vlookat_moveforce,+1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(vlookat_moveforce,0);" url="startdata/graphics/menu/menu5.png" width="40" x="20" y="5"/>
    <plugin name="home" align="bottom" crop="0|0|65|65" height="prop" keep="true" onclick="lookto(get(panoview.h),get(panoview.v),get(panoview.fov),smooth(100,20,50));" onout="" onover="" onovercrop="0|65|65|65" url="startdata/graphics/menu/menu6.png" width="40" x="60" y="5"/>
    <plugin name="openfs" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="set(fullscreen,true);" onout="" onover="" onovercrop="0|65|65|65" url="startdata/graphics/menu/menu7.png" width="40" x="100" y="5"/>
    <plugin name="closefs" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="set(fullscreen,false);" onout="" onover="" onovercrop="0|65|65|65" url="startdata/graphics/menu/menu8.png" visible="false" width="40" x="100" y="5"/>
    <plugin name="soundON" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="playsoundaction();set(plugin[soundON].visible,false); set(plugin[soundOFF].visible,true);" onout="" onover="" onovercrop="0|65|65|65" url="startdata/graphics/menu/menu9.png" visible="false" width="40" x="140" y="5"/>
    <plugin name="soundOFF" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="stopsoundaction();set(plugin[soundOFF].visible,false); set(plugin[soundON].visible,true);" onovercrop="0|65|65|65" url="startdata/graphics/menu/menu10.png" visible="true" width="40" x="140" y="5"/>
    <plugin name="autorotationON" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="switch(autorotate.enabled);set(plugin[autorotationON].visible,false); set(plugin[autorotationOFF].visible,true);" onout="" onover="" onovercrop="0|65|65|65" url="startdata/graphics/menu/menu11.png" visible="" width="40" x="180" y="5"/>
    <plugin name="autorotationOFF" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="switch(autorotate.enabled);set(plugin[autorotationOFF].visible,false); set(plugin[autorotationON].visible,true);" onovercrop="0|65|65|65" url="startdata/graphics/menu/menu12.png" visible="" width="40" x="180" y="5"/>
    <events onenterfullscreen="set(plugin[openfs].visible,false); set(plugin[closefs].visible,true);" onexitfullscreen="set(plugin[openfs].visible,true); set(plugin[closefs].visible,false);"/>
    <!--************** Pano list ******************************************************************-->
    <plugin name="combobox" url="startdata/graphics/combobox.swf" preload="true" keep="true" align="righttop" x="5" y="5" rowcount="10">
        <item name="combobox0" caption="Улица (у бассейна)" onClick="mainloadpano(start0.xml);"/>
        <item name="combobox1" caption="Улица (у чайного домика)" onClick="mainloadpano(start1.xml);"/>
        <item name="combobox2" caption="Улица (вход в дом)" onClick="mainloadpano(start2.xml);"/>
        <item name="combobox3" caption="Чайный домик" onClick="mainloadpano(start3.xml);"/>
        <item name="combobox4" caption="Коридор 1 этаж" onClick="mainloadpano(start4.xml);"/>
        <item name="combobox5" caption="Бойлерная" onClick="mainloadpano(start5.xml);"/>
        <item name="combobox6" caption="Кухня" onClick="mainloadpano(start6.xml);"/>
        <item name="combobox7" caption="Гостинная" onClick="mainloadpano(start7.xml);"/>
        <item name="combobox8" caption="Комната 1 этаж" onClick="mainloadpano(start8.xml);"/>
        <item name="combobox9" caption="Санузел 1 этаж" onClick="mainloadpano(start9.xml);"/>
        <item name="combobox10" caption="Коридор 2 этаж" onClick="mainloadpano(start10.xml);"/>
        <item name="combobox11" caption="Комната 1 (2этаж)" onClick="mainloadpano(start11.xml);"/>
        <item name="combobox12" caption="Комната 2 (2 этаж)" onClick="mainloadpano(start12.xml);"/>
        <item name="combobox13" caption="Комната 3 (2этаж)" onClick="mainloadpano(start13.xml);"/>
        <item name="combobox14" caption="Санузел 2 этаж" onClick="mainloadpano(start14.xml);"/>
    </plugin>
    <!--************** Sequence animation *********************************************************-->
    <action name="animate">
		if (stopSequence == false,
			inc(hotspot[%1].frame,1,get(hotspot[%1].lastframe),0);
			mul(hotspot[%1].ypos,hotspot[%1].frame,hotspot[%1].frameheight);
			txtadd(hotspot[%1].crop,'0|',get(hotspot[%1].ypos),'|',get(hotspot[%1].framewidth),'|',get(hotspot[%1].frameheight));
			delayedcall(%2, animate(%1,%2) );
		);
	</action>
    <!-- Raise sequence stopper and wait sequence time to break the delayed calls -->
    <action name="interruptAnimation">
		ifnot (stopSequence === undefined,
			set(stopSequence, true);
			wait(0.1);
		);
	</action>
</krpano>